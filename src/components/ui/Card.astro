---
/**
 * Card Component
 *
 * A flexible container component for displaying content.
 * Uses named slots for header, content, and footer sections.
 *
 * @example
 * <Card>
 *   <Fragment slot="header"><h3>Card Title</h3></Fragment>
 *   <p>Card content goes here</p>
 *   <Fragment slot="footer"><Button>Action</Button></Fragment>
 * </Card>
 */

import type { HTMLAttributes } from 'astro/types';
import { cn } from '@/lib/utils';

export type CardVariant = 'default' | 'muted' | 'outline';

export interface Props extends HTMLAttributes<'div'> {
  /** Visual style variant */
  variant?: CardVariant;
  /** Whether to show hover shadow effect */
  hoverable?: boolean;
  /** Custom padding class (overrides default p-6) */
  padding?: string;
  /** Additional CSS classes */
  class?: string;
}

const {
  variant = 'default',
  hoverable = true,
  padding = 'p-6',
  class: className,
  ...rest
} = Astro.props;

// Base styles
const baseStyles = 'rounded-lg border transition-shadow';

// Variant styles
const variantStyles: Record<CardVariant, string> = {
  default: 'bg-card border-gray-200',
  muted: 'bg-muted border-gray-200',
  outline: 'bg-transparent border-gray-200',
};

// Hover styles
const hoverStyles = hoverable ? 'hover:shadow-md hover:border-gray-300' : '';

const computedStyles = cn(
  baseStyles,
  variantStyles[variant],
  hoverStyles,
  className
);

// Check if slots are provided
const hasHeader = Astro.slots.has('header');
const hasFooter = Astro.slots.has('footer');
---

<div class={computedStyles} {...rest}>
  {hasHeader && (
    <div class={cn('border-b border-gray-200', padding.includes('p-') ? `px-6 py-4` : padding)}>
      <slot name="header" />
    </div>
  )}

  <div class={cn(padding, hasHeader && 'pt-4', hasFooter && 'pb-4')}>
    <slot />
  </div>

  {hasFooter && (
    <div class={cn('border-t border-gray-200', padding.includes('p-') ? `px-6 py-4` : padding)}>
      <slot name="footer" />
    </div>
  )}
</div>
